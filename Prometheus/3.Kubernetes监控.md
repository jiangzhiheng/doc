一、`Kubernetes`监控方案

1. `Heapster`：
   - 对于`Kubernetes`需要考虑的监控项：
     - `Kubernetes`节点，比如节点的`CPU,Load,Disk,Memory`等指标
     - 内部系统组件的状态，比如`kube-scheduler,kube-controller-manager,Kube-DNS/CoreDNS`等
     - 编排级的`metrics`，比如`Deployment,Pod,DaemonSet,StatefulSet`等资源的状态，资源请求，调度和`API`延迟等数据指标
2. `kube-state-metrics`
   - `kube-state-metrics`通过监听`API Server`生成有关资源对象的状态指标，比如：
     - `Deployment`调度了多少个`Pod`副本，现在可用的有几个？
     - 有多少个`Pod`是`running,stopped`或`terminated`状态？
     - `Pod`重启了几次？
3. `kube-state-metrics`和`metric-server`的区别
   - `kube-state-metrics`主要关注集群资源相关的一些元数据，比如`Deployment,Pod`副本状态和资源限额等静态指标。
   - `metric-server`主要关注资源度量`API`的实现，比如`CPU`，文件描述符，内存，请求延时等实时指标。
4. `Prometheus`

二、`Prometheus`的安装配置

1. 基本安装（`k8s`环境）

   1. 创建`namespace`

      `kubectl create ns kube-ops`

   2. 创建`configmap`

   3. 创建`deploy`资源

   4. 定义`ServiceAccount`以及`RBAC`授权

   5. 定义`Service`资源

   `https://github.com/jiangzhiheng/k8sDemo/tree/master/prometheus/simple_install`

2. 