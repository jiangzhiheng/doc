一、`Mysql`安全机制

- `These mysql database tables contain grant information:`
  - `user:User accounts,global privileges,and other non-privilege columns`
  - `db:Database-level privileges`
  - `tables_priv:Table-level privileges`
  - `columns_priv:Column-level privileges`
  - `procs_priv:Stored procedire and function privileges`
  - `proxyies_priv:Proxy-user privileges`

1. `Mysql`权限表

   - `mysql.user`
     - 用户字段
     - 权限字段
     - 安全字段
     - 资源控制字段
   - `mysql.db`
     - 用户字段
     - 权限字段
   - `mysql.tables_priv`
   - `mysql.columns_priv`

2. `Mysql`用户管理

   1. 登录和退出`Mysql`

      ```sql
      mysql -h192.168.1.10 -P 3306 -uroot -p'123456' mysql -e 'select * from mysql.user'
      	-h 指定主机名，默认为localhost
      	-P 指定服务器端口，默认3306
      	-u 指定用户名，默认root
      	-p 指定登录密码，默认空密码
      	此处mysql指定登录的数据库
      	-e 接SQL语句
      ```

   2. 创建用户

      ```sql
      方法1：create user语句创建
      create user use1@'localhost' identified by '123456';
      方法2：grant语句创建
      grant all on *.* to user2@'localhost' identified by '123456';
      flush privileges;
      ```

      ```sql
      示例：
      # 授权用户user1具有company库的所有权限（只允许192.168.1.1主机连接）
      grant all on company.* to user1@'192.168.1.1' identified by '123456';
      # 授权用户user2具有所有库的所有权限(除grant权限外)
      grant all on *.* to user1@'192.168.1.129' identified by '123456';
      flush privileges;
      ```

   3. 删除用户

      ```sql
      方法1：drop user语句删除
      drop user 'user1'@'localhost';
      方法2：delete语句删除
      delete from mysql.user where user='user2' and host='localhost';
      flush privileges;
      ```

   4. 修改用户密码

      ```sql
      # 修改root密码
      方法1：
      # mysqladmin -uroot -p'12345' password 'newPpassword'
      方法2：
      update mysql.user set authentication_string=password('new_password') where user='root' and host='localhost';
      flush privileges;
      方法3：
      SET PASSWORD=password('new_password');
      flush privileges;
      
      #root用户修改其它用户的密码
      方法1：
      SET PASSWORD FOR user3@'localhost'=password('new_password');
      flush privileges;
      方法2：
      update mysql.user set authentication_string=password('new_password') where user='user1' and host='localhost';
      flush privileges;
      
      # 普通用户修改自己密码
      SET password=password('new_password');
      
      # 丢失root用户密码
      ```

3. `Mysql`权限管理

4. `SSL`加密连接