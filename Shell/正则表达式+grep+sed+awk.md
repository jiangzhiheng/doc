### **正则表达式**

1. 概述

   正则表达式（Regular Expression）是一种字符模式，用于在查找过程中匹配指定的字符。

   在大多数程序里，正则表达式都被置于两个斜杠之间；例如`/l[oO]ve/`就是由正则斜杠界定的正则表达式

   - 匹配数字 ： `^[0-9]+$`
   - 匹配Mail：`[a-z0-9_]+@[a-z0-9]+\.[a-z]+`
   - 匹配IP：`[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}`

2. 元字符

   定义：元字符是这样一类字符，它们表达的是不同于字面本身的含义

   - 正则表达式元字符

     1. 基本正则表达式元字符

        |   元字符   |           功能           |               示例                |
        | :--------: | :----------------------: | :-------------------------------: |
        |     ^      |        行首定位符        |                                   |
        |     $      |        行尾定位符        |                                   |
        |     .      |       匹配单个字符       |                                   |
        |     *      |    匹配前导符0到多次     |                                   |
        |     .*     |       任意多个字符       |                                   |
        |     []     | 匹配指定范围内的一个字符 |                                   |
        |   [ - ]    | 匹配指定范围内的一个字符 |                                   |
        |     \      |          转义符          |                                   |
        |    \\<     |        词首定位符        |                                   |
        |    \\>     |        词尾定位符        |                                   |
        |  \\(..\\)  | 匹配稍后使用的字符的标签 | :3,9 s/\\(.*\\)/#\1/   注释3到9行 |
        |  x\\{m\\}  |       字符x重复m次       |                                   |
        | x\\{m,\\}  |     字符x出现m次以上     |                                   |
        | x\\{m,n\\} |    字符x出现m次到n次     |                                   |

     2. 扩展正则表达式元字符

        |    元字符    |          功能          | 示例 |
        | :----------: | :--------------------: | :--: |
        |      +       | 匹配一个或多个前导字符 |      |
        |      ？      | 匹配0个或一个前导字符  |      |
        |     a\|b     |       匹配a或者b       |      |
        |      ()      |         组字符         |      |
        | (..)(..)\1\2 |      标签匹配字符      |      |
        |     x{m}     |      字符x重复m次      |      |
        |    x{m,}     |    字符x重复至少m次    |      |
        |    x{m,n}    |    字符x重复m到n次     |      |

     3. POSIX字符类

        | 表达式    | 功能                             | 示例            |
        | --------- | -------------------------------- | --------------- |
        | [:alnum:] | 字母与数字字符                   | [[:alnum:]]+    |
        | [:alpha:] | 字母字符（包括大小写）           |                 |
        | [:blank:] | 空格与制表符                     |                 |
        | [:digit:] | 数字                             | [[:digit:]]?    |
        | [:lower:] | 小写字母                         | [[:lower:]]{5,} |
        | [:upper:] | 大写字母                         |                 |
        | [:punct:] | 标点符号                         |                 |
        | [:space:] | 包括换行符，回车等在内的所有空白 | [[:space:]]+    |

3. 正则表达式示例

   /^$/   空行

   /^#/	注释行

   .....

### **`grep`家族**

- `grep`：在文件中全局查找指定的正则表达式，并打印所有包含该表达式的行
- `egrep`：扩展的`egrep`，支持更多的表达式元字符
- `fgrep`：固定`grep(fixed grep)`,有时也被称为快速`(fast grep)`，它按字面意思解释所有的字符

1. `grep`命令格式

   `grep [options]  PATTERN filename filename....`

   `grep`程序的输入可以来自标准输入或管道，而不仅仅是文件

2. `grep`使用的元字符

   `grep`  :  使用基本的元字符  ^  $  .   *   [ ]  \[^]  \\<  \\>   \\(\\)   \\{\\}  \\+  \\|  

   `egrep` :  使用扩展的元字符  ? +  { }  |   ()

   \w  :    所有字母与数字，称为字符`[a-zA-Z0-9]` 

   \W  :   所有字母与数字之外的字符，称为非字符

   \b    :   词边界   `  '\\<love\\> '     '\blove\b'  `

3. `grep`示例

   `grep -E  或egrep`

4. `grep`选项

   - -i     忽略大小写

   - -q    静默显示

   - -v    反向查找，只显示不匹配的行

   - -c    --count  显示成功匹配的行

     `grep  --help | grep  '\-v'`

   - -r     递归整个目录

   - -o     只显示匹配道德内容

     `   egrep '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'  /etc/hosts `  匹配IP地址
     
     `egrep '([0-9]{1,3}).{3}\.[0-9]{1,3}'  /etc/hosts`    匹配IP地址

### **`Sed`流编辑器**

1. `sed`工作流程

   `sed`是一种在线的，非交互式的编辑器，它一次处理一行内容，处理时，把当前处理的存储在临时缓冲区中，称为"模式空间(Pattern space)"，接着用`sed`命令处理缓冲区中的内容，处理完成后，把缓冲区中的内容送往屏幕，接着处理下一行，直到文件末尾。文件内容并没有改变，此非食用重定向存储输出。

2. 命令格式

   `sed [options]  'command'   file(s)`

   `sed [options]  -f scriptsfile file(s)`

   Tips :  `sed`和`grep` 不一样，不管是否找到指定的格式，它的退出状态都是0

3.  支持正则表达式

   - 使用基本元字符集
   - 使用扩展的元字符集  `sed -r`

4. `sed`基本用法

   `# sed -r 's/root/alice/gi' /etc/passwd     g代表全局，i忽略大小写`  查找替换 

   .......

5. `sed`扩展

   1. 地址

      地址用于决定对哪些进行编辑。地址形式可以是数字，正则表达式或二者的集合，如果没指定则默认处理所有行

      `sed -r 'd' /etc/passwd`

      `sed -r '3d' /etc/passwd`  

      `sed -r '1,3d' /etc/passwd`

      `sed -r '/root/d' /etc/passwd`

      `sed -r '/root/,5d' /etc/passwd` 从匹配到的行开始删掉5行

      `sed -r 's/root/alice/g' /etc/passwd`

      `sed -r '/root/!d' /etc/passwd`

      `sed -r '1~2d' /etc/passwd`  删掉所有的奇数行

      `sed -r '0~2d' /etc/passwd`  删掉所有的偶数行

   2. `sed`命令

      `sed`命令告诉`sed`对指定行进行何种操作，包括打印，删除，修改等

      | 命令 |                      功能                      |
      | :--: | :--------------------------------------------: |
      |  a   |            在当前行后添加一行或多行            |
      |  c   |       用新文本修改（替换）当前行中的文本       |
      |  d   |                     删除行                     |
      |  i   |              在当前行之前插入文本              |
      |  p   |                     打印行                     |
      |  !   |          对所选行以外的所有行应用命令          |
      |  s   | 用一个字符串替换另一个  g全局替换，i忽略大小写 |
      |  r   |                   从文件中读                   |
      |  w   |                  将行写入文件                  |

   3. `sed` 选项

      -e    允许多项编辑

      -f     指定`sed`脚本文件名

      -n	取消默认的输出

      -i     `inplace`，就地编辑，直接修改源文件

      -r	支持扩展元字符

6. `sed`命令示例

   删除命令

   - `sed -r '3d' /etc/passwd`     删除第三行
   - `sed -r '3{d;}' /etc/passwd`     删除第三行
   - `sed -r '3{d}' /etc/passwd`     删除第三行
   - `sed -r '$d' /etc/passwd`       删除最后一行

   替换命令

   - `sed -r 's/west/north/g' datafile`
   - 

7. 