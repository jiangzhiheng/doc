### 一、静态文件

管理静态资源文件，比如`js,css,`字体，图片等

**配置静态文件：**

1. 确保`django.contrib.staticfiles`在`INSTALLED_APPS`中存在

2. `settings.py`文件中定义`STATIC_URL = '/static/'`

3. 创建静态资源目录

   目录结构

   ```python
   project/
   	App/
       	templates/
           static/
           	css/
               js/
               img/
               upload/
   ```

**实例：**

```django
{% extends 'common/base.html' %}
{% block title %}
首页
{% endblock %}
{% load static %}
{% block pagecontent %}
    <h2>首页</h2>
{#    <img src="/static/img/img.jpg">#}
    <img src="{% static 'img/img.jpg' %}">
{% endblock %}
```

注意：

- 模板继承标签必须放在第一行

- 如果将`static`静态资源目录与`App`同级，那么上面的方式就会出现问题，所以需要在`settings.py`下进行配置

  ```python
  STATIC_URL = '/static/'
  STATICFILES_DIRS = [
      os.path.join(BASE_DIR,'static'),
  ]
  ```

  此时不管`static`与`App`同级还是在`App`内部，都能正常查找到静态资源位置

### 二、上传图片

1. 概述：文件上传时，文件数据存储在`request.FILE`属性中

2. 注意：

   - `form`表单在配置文件上传时候，必须存在`enctype`属性值的修改`enctype="multipart/form-data"`
   - `method`提交方式为`POST`

3. 配置存储路径

   - 在`static`目录下创建`upload`上传目录

   - 在`settings`中添加配置

     ```python
     # 文件上传存储路径
     MEDIA_ROOT = os.path.join(BASE_DIR,'static/upload')
     ```

4. 在文件上传之前，需要掌握文件上传的属性和方法

   - `myFile.read()`：从文件中读取整个上传的数据，这个方法只适合小文件
   - `myFile.chunks()`：按块返回文件  通过在`for`循环中进行迭代，可以讲大文件按块写入到服务器中
   - `myFile.multiple_chunks()`：这个方法根据`myFile`的大小返回`True`或`False`，当文件大于2.5M，该方法返回`True`，否则返回`False`，因此可以根据该方法进行选择使用哪种上传方式。
   - `myFile.name`，属性，得到上传文件的文件名，包括后缀
   - `myFile.size`，得到上传文件的大小。

5. 代码示例

   模板代码：

   ```html
   {% extends 'common/base.html' %}
   {% block title %}
       文件上传
   {% endblock %}
   
   {% block pagecontent %}
   <h2>文件上传</h2>
       <form action="" method="post" enctype="multipart/form-data">
           {% csrf_token %}
           <p>选择图片：<input type="file" name="file" required></p>
           <p><input type="submit" value="上传"></p>
       </form>
   {% endblock %}
   ```

   视图函数：

   ```python
   # 文件上传
   def upload(req):
       if req.method == 'POST':
           # 获取上传文件对象
           f = req.FILES.get('file')
           # 配置文件存储路径
           filePath = os.path.join(settings.MEDIA_ROOT,f.name)
           # print(filePath)
           # 进行文件上传
           with open(filePath,'wb') as fp:
               # 判断何种方式写入
               if f.multiple_chunks():
                   for img in f.chunks():
                       fp.write(img)
               else:
                   fp.write(f.read())
       return render(req, 'upload/upload_img.html')
   ```

6. 