### 一、原生表单

1. 创建一个模板文件 代码如下

   ```html
   <h2>表单</h2>
   <form action="" method="post">
       <p>用户名：<input type="text" name="username" placeholder="请输入用户名"></p>
       <p>密码：<input type="password" name="password" placeholder="请输入密码"></p>
       <p><input type="submit" value="submit"></p>
   </form>    
   </body>
   ```

2. 视图函数如下

   ```python
   from flask import Flask,render_template,request
   
   # 原生form的使用
   @app.route('/form1/',methods=['GET','POST'])
   def form1():
       if request.method == 'POST':
           username = request.form.get('username')
           userpass = request.form.get('password')
           return '用户名为：{} 密码为{}'.format(username,userpass)
       else:
           return render_template('form1.html')
   ```

   注意：

   - 路由请求方式默认为`get`，所以当有别的请求方式进行请求的时候会`Method Not Allowed`

     更改请求方式`@app.route('/form1/',methods=['GET','POST'])`

   - `form`表单的`action`属性值不给默认为提交给当前地址


### 二、`flask-wtf`表单扩展库

1. 安装

   `pip install flask-wtf`

2. 说明：

   是一个用于表单处理的扩展卡，提供了`csrf`表单校验等功能，使用非常的方便

3. 常见字段类型和验证器

   1. 字段类型

      |    字段类型     |              说明               |
      | :-------------: | :-----------------------------: |
      |  `StringField`  |          普通文本字段           |
      |  `SubmitField`  |            提交按钮             |
      | `PasswordField` |          密码文本字段           |
      |  `HiddenField`  |          隐藏文本字段           |
      | `TextAreaField` |          多行文本字段           |
      |   `DateField`   |   文本字段`datetime.date`格式   |
      | `DateTimeField` | 文本字段`datetime.datetime`格式 |
      | `IntegerField`  |       文本字段，值为正数        |
      |  `FloatField`   |        文本字段 值为小数        |
      | `BooleadField`  |   复选框，值为`True`或`False`   |
      |  `SelectField`  |             下拉框              |
      |  `RadioField`   |             单选框              |
      |   `FileField`   |            文件上传             |

   2. 常见验证器

      |     验证器     |                   说明                    |
      | :------------: | :---------------------------------------: |
      | `DataRequired` |                 必须有值                  |
      |    `Email`     |                 邮箱地址                  |
      |  `IPAddress`   |                 `IP`地址                  |
      |    `Length`    | 规定字符长度 有`max`和`min`两个值进行限制 |
      | `NumberRange`  |                 值得范围                  |
      |   `EqualTo`    |           验证两个字段的一致性            |
      |     `URL`      |            验证有效的`URL`地址            |
      |    `Regexp`    |                 正则验证                  |

4. 简单使用

   视图函数如下：

   ```python
   from flask import Flask,render_template,request
   from flask_script import Manager
   # 导入表单类的父类
   from flask_wtf import FlaskForm
   # 导入字段类型
   from wtforms import StringField,PasswordField,SubmitField
   
   
   app = Flask(__name__)
   # 用于生成csrf_token
   app.config['SECRET_KEY'] = 'SECRET_KEY'
   manager = Manager(app)
   
   # 定义表单类
   class Register(FlaskForm):
       # username 为name名 字段类型参数1 为label
       username = StringField('用户名')
       userpass = PasswordField('密码')
       submit = SubmitField('注册')
   
   
   # 使用表单扩展库 flask-wtf
   @app.route('/wtf_form/',methods=['GET','POST'])
   def wtf_form():
       # 实例化表单验证器
       form = Register()
       # 提交的方式为post并且表单验证器与csrf_token都通过则为真
       if form.validate_on_submit():
           return '正确'
       return render_template('form2.html',form=form)
   ```

   模板代码如下：

   ```html
   <h2>flask-wtf表单</h2>
   <form action="" method="post">
       {{ form.csrf_token }}
       <p>
           {{ form.username.label }} {{ form.username(class='my_username',style="color:blue",placeholder='请输入用户名') }}
           {#  显示验证器验证失败的错误信息，如果没有则为空元组      #}
           <span style="color: red">
           {% for err in form.username.errors %}
               {{ err }}
           {% endfor %}
           </span>
       </p>
       <p>
           {{ form.userpass.label }} {{ form.userpass(class='my_username',style="color:blue",placeholder='请输入密码') }}
           <span style="color: red">
           {# 没通过验证器验证则提示错误信息 #}
           {% for err in form.username.errors %}
               {{ err }}
           {% endfor %}
           </span>
       </p>
       <p>{{ form.submit }}</p>
   </form>
   ```

5. 使用`bootstrap`快速渲染

   `manage.py`中`bootstrap`的代码

   ```python
   from flask_bootstrap import Bootstrap
   
   app = Flask(__name__)
   # 用于生成csrf_token
   app.config['SECRET_KEY'] = 'SECRET_KEY'
   app.config['BOOTSTRAP_SERVE_LOCAL'] = True
   Bootstrap(app)
   ```

   `bootstrap`的模板表单内容

   ```jinja2
   {% extends 'common/base.html' %}
   {% block title %}
       bootstrap快速渲染表单
   {% endblock %}
   
   {% from  'bootstrap/wtf.html' import quick_form %}
   {% block page_content %}
       <h4>Bootstrap快速渲染表单</h4>
       {{ quick_form(form) }}
   {% endblock %}
   ```

6. `render_kw`属性的使用

   ```python
   info = TextAreaField('个人信息',render_kw={'style':'resize:none','placeholder':'请输入个人信息'})
   ```

7. 